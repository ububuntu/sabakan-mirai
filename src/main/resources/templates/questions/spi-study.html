<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>SPI 模擬試験 | Mirai</title>
    <link rel="stylesheet" th:href="@{/css/color.css}">
    <link rel="stylesheet" th:href="@{/css/style.css}" />
</head>
<body>
<header th:replace="common/header :: siteHeader('spiStudyHeader')"></header>
<div th:replace="~{common/color :: svg-sprite}"></div>
<main>
    <form class="menu" th:action="@{/spi/study}" method="post">
        <progress class="progress" max="100" th:value="${progress}"></progress>

        <p class="progress-text">
            問題 <span th:text="${currentIndex}">1</span> / <span th:text="${totalCount}">70</span>
        </p>

        <div class="menu-item">
            <p class="title" th:text="${question.spi_content}">問題文がここに表示されます</p>
        </div>

        <label class="menu-item choice-label" for="ans1">
            <svg class="icon icon-with-bg" width="48" height="48"><use href="#es"></use></svg>
            <input type="radio" id="ans1" name="answer" value="1" required
                   th:checked="${question.user_answer == 1}">
            <span class="note" th:text="${question.spi_answer1}">選択肢1</span>
        </label>

        <label class="menu-item choice-label" for="ans2">
            <svg class="icon icon-with-bg" width="48" height="48"><use href="#es"></use></svg>
            <input type="radio" id="ans2" name="answer" value="2"
                   th:checked="${question.user_answer == 2}">
            <span class="note" th:text="${question.spi_answer2}">選択肢2</span>
        </label>

        <label class="menu-item choice-label" for="ans3">
            <svg class="icon icon-with-bg" width="48" height="48"><use href="#es"></use></svg>
            <input type="radio" id="ans3" name="answer" value="3"
                   th:checked="${question.user_answer == 3}">
            <span class="note" th:text="${question.spi_answer3}">選択肢3</span>
        </label>

        <label class="menu-item choice-label" for="ans4">
            <svg class="icon icon-with-bg" width="48" height="48"><use href="#es"></use></svg>
            <input type="radio" id="ans4" name="answer" value="4"
                   th:checked="${question.user_answer == 4}">
            <span class="note" th:text="${question.spi_answer4}">選択肢4</span>
        </label>

        <input type="hidden" name="spiId" th:value="${question.spi_id}" />
        <input type="hidden" name="currentIndex" th:value="${currentIndex}" />

        <button class="button-center" type="submit" name="action" value="next">
            <span th:text="${currentIndex == 70} ? '結果を見る' : '次の問題'">次の問題</span>
        </button>

        <button class="button-center" type="submit" name="action" value="suspend" formnovalidate>
            中断して戻る
        </button>
        <button class="button-center" type="submit" name="action" value="finish" formnovalidate>
            ここで終了して採点する
        </button>
    </form>
    <div class="spacer" aria-hidden="true"></div>
</main>
<footer th:replace="common/footer :: siteFooter"></footer>
<script th:src="@{/js/style.js}"></script>
</body>
</html>